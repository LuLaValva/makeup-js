!function(){"use strict";var e,t,n,i,o,r={73:function(e,t,n){function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=o(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var d=n(8312),f=n(8761),h={activeDescendantClassName:"active-descendant",autoInit:-1,autoReset:-1,autoScroll:!1,axis:"both",ignoreButtons:!1};function v(){var e=this._options,t=this._navigationEmitter.model.index;this.filteredItems.forEach((function(n,i){f(n),i!==t?n.classList.remove(e.activeDescendantClassName):n.classList.add(e.activeDescendantClassName)}))}function p(e){var t=this.filteredItems[e.detail.fromIndex],n=this.filteredItems[e.detail.toIndex];t&&t.classList.remove(this._options.activeDescendantClassName),n&&(n.classList.add(this._options.activeDescendantClassName),this._focusEl.setAttribute("aria-activedescendant",n.id),this._options.autoScroll&&this._containerEl&&(this._containerEl.scrollTop=n.offsetTop-this._containerEl.offsetHeight/2)),this._el.dispatchEvent(new CustomEvent("activeDescendantChange",{detail:{fromIndex:e.detail.fromIndex,toIndex:e.detail.toIndex}}))}function m(e){var t=e.detail.toIndex,n=this._options.activeDescendantClassName;if(this.filteredItems.forEach((function(e){e.classList.remove(n)})),t>-1){var i=this.filteredItems[t];i.classList.add(n),this._focusEl.setAttribute("aria-activedescendant",i.id)}else this._focusEl.removeAttribute("aria-activedescendant")}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(u,e);var t,n,o=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=a(t);if(n){var o=a(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return s(this,e)});function u(e,t,n,i,r){var s;if(c(this,u),(s=o.call(this,e))._options=Object.assign({},h,r),s._navigationEmitter=d.createLinear(e,i,{autoInit:s._options.autoInit,autoReset:s._options.autoReset,axis:s._options.axis,ignoreButtons:s._options.ignoreButtons}),s._focusEl=t,s._containerEl=n,s._itemSelector=i,f(n),n!==t&&t.setAttribute("aria-owns",n.id),s.items.forEach((function(e){f(e)})),s._options.autoInit>-1){var a=s.filteredItems[s._options.autoInit];a.classList.add(s._options.activeDescendantClassName),s._focusEl.setAttribute("aria-activedescendant",a.id)}return s}return l(u,[{key:"index",get:function(){return this._navigationEmitter.model.index},set:function(e){this._navigationEmitter.model.index=e}},{key:"reset",value:function(){this._navigationEmitter.model.reset()}},{key:"filteredItems",get:function(){return this._navigationEmitter.model.filteredItems}},{key:"items",get:function(){return this._navigationEmitter.model.items}},{key:"_items",get:function(){return this.items}},{key:"wrap",set:function(e){this._navigationEmitter.model.options.wrap=e}},{key:"destroy",value:function(){i(a(u.prototype),"destroy",this).call(this),this._navigationEmitter.destroy()}}]),u}(function(){function e(t){c(this,e),this._el=t,this._onMutationListener=v.bind(this),this._onChangeListener=p.bind(this),this._onResetListener=m.bind(this),this._el.addEventListener("navigationModelMutation",this._onMutationListener),this._el.addEventListener("navigationModelChange",this._onChangeListener),this._el.addEventListener("navigationModelReset",this._onResetListener)}return l(e,[{key:"destroy",value:function(){this._el.removeEventListener("navigationModelMutation",this._onMutationListener),this._el.removeEventListener("navigationModelChange",this._onChangeListener),this._el.removeEventListener("navigationModelReset",this._onResetListener)}}]),e}());e.exports={createLinear:function(e,t,n,i,o){return new y(e,t,n,i,o)}}},9455:function(e,t,n){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=n(8761),r={};function s(e,t,n){e.dispatchEvent(new CustomEvent("focusExit",{detail:{fromElement:t,toElement:n},bubbles:!1}))}function a(e){var t=e.target;!0===this.el.contains(t)?this.currentFocusElement=t:(window.removeEventListener("blur",this.onWindowBlurListener),document.removeEventListener("focusin",this.onDocumentFocusInListener),s(this.el,this.currentFocusElement,t),this.currentFocusElement=null)}function c(){s(this.el,this.currentFocusElement,void 0)}function u(){document.addEventListener("focusin",this.onDocumentFocusInListener),window.addEventListener("blur",this.onWindowBlurListener)}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.currentFocusElement=null,this.onWidgetFocusInListener=u.bind(this),this.onDocumentFocusInListener=a.bind(this),this.onWindowBlurListener=c.bind(this),this.el.addEventListener("focusin",this.onWidgetFocusInListener)}var t,n;return t=e,(n=[{key:"removeEventListeners",value:function(){window.removeEventListener("blur",this.onWindowBlurListener),document.removeEventListener("focusin",this.onDocumentFocusInListener),this.el.removeEventListener("focusin",this.onWidgetFocusInListener)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports={addFocusExit:function(e){var t=null;return o(e),r[e.id]||(t=new l(e),r[e.id]=t),t},removeFocusExit:function(e){var t=r[e.id];t&&(t.removeEventListeners(),delete r[e.id])}}},6001:function(e,t,n){var i=n(7893);function o(e,t,n){if(!e.shiftKey){var o=i.keyCodeToKeyMap[e.keyCode];switch(o){case"Enter":case"Escape":case"Spacebar":case"PageUp":case"PageDown":case"End":case"Home":case"ArrowLeft":case"ArrowUp":case"ArrowRight":case"ArrowDown":t.dispatchEvent(new CustomEvent(i.uncapitalizeFirstLetter("".concat(o,"Key").concat(n)),{detail:e,bubbles:!0}));break;default:return}}}function r(e){o(e,this,"Down")}function s(e){o(e,this,"Up")}function a(e){e.addEventListener("keydown",r)}function c(e){e.addEventListener("keyup",s)}function u(e){e.removeEventListener("keydown",r)}function l(e){e.removeEventListener("keyup",s)}e.exports={addKeyDown:a,addKeyUp:c,removeKeyDown:u,removeKeyUp:l,add:function(e){a(e),c(e)},remove:function(e){u(e),l(e)}}},7893:function(e){e.exports={keyCodeToKeyMap:{13:"Enter",27:"Escape",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"},uncapitalizeFirstLetter:function(e){return e.charAt(0).toLowerCase()+e.slice(1)}}},8312:function(e,t,n){function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=n(6001),l=n(9455),d="data-makeup-index",f={axis:"both",autoInit:0,autoReset:null,ignoreButtons:!1,wrap:!1},h=function(e){return!e.hidden};function v(e){e.forEach((function(e,t){return e.setAttribute(d,t)}))}function p(e){return"button"===e.tagName.toLowerCase()||"button"===e.type}function m(e){!1!==p(e.detail.target)&&!1!==this.options.ignoreButtons||(this.atStart()?this.options.wrap&&(this.index=this.filteredItems.length-1):this.index--)}function y(e){!1!==p(e.detail.target)&&!1!==this.options.ignoreButtons||(this.atEnd()?this.options.wrap&&(this.index=0):this.index++)}function E(e){for(var t=e.target,n=t.dataset.makeupIndex;t!==this._el&&!n;)n=(t=t.parentNode).dataset.makeupIndex;void 0!==n&&(this.index=n)}function b(e){!1!==p(e.detail.target)&&!1!==this.options.ignoreButtons||(this.index=0)}function w(e){!1!==p(e.detail.target)&&!1!==this.options.ignoreButtons||(this.index=this.filteredItems.length)}function _(){null!==this.options.autoReset&&this.reset()}function L(){this.items.forEach((function(e){return e.removeAttribute(d)})),v(this.filteredItems),this._el.dispatchEvent(new CustomEvent("navigationModelMutation"))}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,n,s=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=r(t);if(n){var s=r(this).constructor;e=Reflect.construct(i,arguments,s)}else e=i.apply(this,arguments);return o(this,e)});function u(e,t,n){var i;return c(this,u),null!==(i=s.call(this,e,t,n)).options.autoInit&&(i._index=i.options.autoInit,i._el.dispatchEvent(new CustomEvent("navigationModelInit",{detail:{items:i.filteredItems,toIndex:i.options.autoInit},bubbles:!1}))),i}return a(u,[{key:"items",get:function(){return this._el.querySelectorAll(this._itemSelector)}},{key:"filteredItems",get:function(){return Array.prototype.slice.call(this.items).filter(h)}},{key:"index",get:function(){return this._index},set:function(e){e>-1&&e<this.filteredItems.length&&e!==this.index&&(this._el.dispatchEvent(new CustomEvent("navigationModelChange",{detail:{fromIndex:this.index,toIndex:e},bubbles:!1})),this._index=e)}},{key:"reset",value:function(){null!==this.options.autoReset&&(this._index=this.options.autoReset,this._el.dispatchEvent(new CustomEvent("navigationModelReset",{detail:{toIndex:this.options.autoReset},bubbles:!1})))}},{key:"atEnd",value:function(){return this.index===this.filteredItems.length-1}},{key:"atStart",value:function(){return this.index<=0}}]),u}(a((function e(t,n,i){c(this,e),this.options=Object.assign({},f,i),this._el=t,this._itemSelector=n}))),x=function(){function e(t,n){c(this,e),this.model=n,this.el=t,this._keyPrevListener=m.bind(n),this._keyNextListener=y.bind(n),this._keyHomeListener=b.bind(n),this._keyEndListener=w.bind(n),this._clickListener=E.bind(n),this._focusExitListener=_.bind(n),this._observer=new MutationObserver(L.bind(n)),v(n.filteredItems),u.addKeyDown(this.el),l.addFocusExit(this.el);var i=n.options.axis;"both"!==i&&"x"!==i||(this.el.addEventListener("arrowLeftKeyDown",this._keyPrevListener),this.el.addEventListener("arrowRightKeyDown",this._keyNextListener)),"both"!==i&&"y"!==i||(this.el.addEventListener("arrowUpKeyDown",this._keyPrevListener),this.el.addEventListener("arrowDownKeyDown",this._keyNextListener)),this.el.addEventListener("homeKeyDown",this._keyHomeListener),this.el.addEventListener("endKeyDown",this._keyEndListener),this.el.addEventListener("click",this._clickListener),this.el.addEventListener("focusExit",this._focusExitListener),this._observer.observe(this.el,{childList:!0,subtree:!0,attributeFilter:["hidden"],attributes:!0})}return a(e,[{key:"destroy",value:function(){u.removeKeyDown(this.el),l.removeFocusExit(this.el),this.el.removeEventListener("arrowLeftKeyDown",this._keyPrevListener),this.el.removeEventListener("arrowRightKeyDown",this._keyNextListener),this.el.removeEventListener("arrowUpKeyDown",this._keyPrevListener),this.el.removeEventListener("arrowDownKeyDown",this._keyNextListener),this.el.removeEventListener("homeKeyDown",this._keyHomeListener),this.el.removeEventListener("endKeyDown",this._keyEndListener),this.el.removeEventListener("click",this._clickListener),this.el.removeEventListener("focusExit",this._focusExitListener),this._observer.disconnect()}}],[{key:"createLinear",value:function(t,n,i){return new e(t,new g(t,n,i))}}]),e}();e.exports=x},8761:function(e){var t={},n=function(e){for(var t="abcdefghijklmnopqrstuvwxyz"[i(25)],n=1;n<3;n++)t+="abcdefghijklmnopqrstuvwxyz0123456789"[i(35)];return t}();function i(e){return Math.floor(Math.random()*e)}e.exports=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nid",o=""===i?"":"-",r="".concat(i).concat(o).concat(n);return t[r]=t[r]||0,e.id||e.setAttribute("id","".concat(r,"-").concat(t[r]++)),e.id}}},s={};e=function e(t){var n=s[t];if(void 0!==n)return n.exports;var i=s[t]={exports:{}};return r[t](i,i.exports,e),i.exports}(73),t=[],n=document.getElementById("appender"),i=document.querySelectorAll(".widget"),o=document.getElementById("wrap"),n.addEventListener("click",(function(){i.forEach((function(e){var t=e.querySelector("ul"),n=document.createElement("li");n.setAttribute("role","option");var i=parseInt(t.querySelectorAll("li").length,10);n.innerText="Item ".concat(i),t.appendChild(n)}))})),i.forEach((function(n){n.addEventListener("activeDescendantChange",(function(e){console.log(e)}));var i={ignoreButtons:!0};void 0!==n.dataset.makeupInit&&(i.autoInit=n.dataset.makeupInit),void 0!==n.dataset.makeupReset&&("null"===n.dataset.makeupReset?i.autoReset=null:i.autoReset=n.dataset.makeupReset);var o=e.createLinear(n,n.querySelector("input")||n.querySelector("ul"),n.querySelector("ul"),"li",i);t.push(o)})),o.addEventListener("change",(function(e){t[0].wrap=e.target.checked}))}();
//# sourceMappingURL=index.min.js.map