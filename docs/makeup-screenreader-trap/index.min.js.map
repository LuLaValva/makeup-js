{"version":3,"sources":["webpack://root/./node_modules/nodelist-foreach-polyfill/index.js","webpack://root/./packages/makeup-screenreader-trap/index.js","webpack://root/./packages/makeup-screenreader-trap/node_modules/custom-event/index.js","webpack://root/./packages/makeup-screenreader-trap/util.js","webpack://root/webpack/bootstrap","webpack://root/webpack/runtime/global","webpack://root/./docs/makeup-screenreader-trap/index.compiled.js"],"names":["window","NodeList","prototype","forEach","callback","thisArg","i","this","length","call","_extends","Object","assign","target","arguments","source","key","hasOwnProperty","apply","mainEl","trappedEl","dirtyObjects","CustomEvent","util","filterSvg","item","tagName","toLowerCase","showElementPrep","el","useHiddenProperty","prepareElement","hideElementPrep","attributeName","dirtyValue","isProperty","cleanValue","getAttribute","untrap","preparedObj","setAttribute","removeAttribute","dispatchEvent","bubbles","defaultOptions","module","exports","trap","selectedOptions","options","document","querySelector","ancestors","getAncestors","siblings","getSiblings","siblingsOfAncestors","getSiblingsOfAncestors","filter","concat","map","NativeCustomEvent","g","p","detail","foo","type","e","useNative","createEvent","params","initCustomEvent","cancelable","createEventObject","Boolean","filterAncestor","nodeType","filterSibling","flattenArrays","a","b","getPreviousSiblings","undefined","previousSibling","push","getNextSiblings","nextSibling","getAllAncestors","nextAncestor","parentNode","reduce","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","globalThis","Function","screenreaderTrap","querySelectorAll","addEventListener","console","log","innerText"],"mappings":"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","file":"makeup-screenreader-trap/index.min.js","sourcesContent":["if (window.NodeList && !NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = function (callback, thisArg) {\r\n        thisArg = thisArg || window;\r\n        for (var i = 0; i < this.length; i++) {\r\n            callback.call(thisArg, this[i], i, this);\r\n        }\r\n    };\r\n}\r\n","'use strict'; // requires CustomEvent polyfill for IE\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar CustomEvent = require('custom-event');\n\nvar util = require('./util.js'); // the main landmark\n\n\nvar mainEl; // the element that will be trapped\n\nvar trappedEl; // collection of elements that get 'dirtied' with aria-hidden attr or hidden prop\n\nvar dirtyObjects; // filter function for svg elements\n\nvar filterSvg = function filterSvg(item) {\n  return item.tagName.toLowerCase() !== 'svg';\n};\n\nfunction showElementPrep(el, useHiddenProperty) {\n  var preparedElement;\n\n  if (useHiddenProperty === false) {\n    preparedElement = prepareElement(el, 'aria-hidden', 'false');\n  } else {\n    preparedElement = prepareElement(el, 'hidden', false);\n  }\n\n  return preparedElement;\n}\n\nfunction hideElementPrep(el, useHiddenProperty) {\n  var preparedElement;\n\n  if (useHiddenProperty === false) {\n    preparedElement = prepareElement(el, 'aria-hidden', 'true');\n  } else {\n    preparedElement = prepareElement(el, 'hidden', true);\n  }\n\n  return preparedElement;\n}\n\nfunction prepareElement(el, attributeName, dirtyValue) {\n  var isProperty = typeof dirtyValue === 'boolean';\n  return {\n    el: el,\n    attributeName: attributeName,\n    cleanValue: isProperty ? el[attributeName] : el.getAttribute(attributeName),\n    dirtyValue: dirtyValue,\n    isProperty: isProperty\n  };\n}\n\nfunction dirtyElement(preparedObj) {\n  if (preparedObj.isProperty === true) {\n    preparedObj.el[preparedObj.attributeName] = preparedObj.dirtyValue;\n  } else {\n    preparedObj.el.setAttribute(preparedObj.attributeName, preparedObj.dirtyValue);\n  }\n}\n\nfunction cleanElement(preparedObj) {\n  if (preparedObj.cleanValue) {\n    if (preparedObj.isProperty === true) {\n      preparedObj.el[preparedObj.attributeName] = preparedObj.cleanValue;\n    } else {\n      preparedObj.el.setAttribute(preparedObj.attributeName, preparedObj.cleanValue);\n    }\n  } else {\n    preparedObj.el.removeAttribute(preparedObj.attributeName);\n  }\n}\n\nfunction untrap() {\n  if (trappedEl) {\n    // restore 'dirtied' elements to their original state\n    dirtyObjects.forEach(function (item) {\n      return cleanElement(item);\n    });\n    dirtyObjects = []; // 're-enable' the main landmark\n\n    if (mainEl) {\n      mainEl.setAttribute('role', 'main');\n    } // let observers know the screenreader is now untrapped\n\n\n    trappedEl.dispatchEvent(new CustomEvent('screenreaderUntrap', {\n      bubbles: true\n    }));\n    trappedEl = null;\n  }\n}\n\nvar defaultOptions = {\n  useHiddenProperty: false\n};\n\nfunction trap(el, selectedOptions) {\n  // ensure current trap is deactivated\n  untrap();\n\n  var options = _extends({}, defaultOptions, selectedOptions); // update the trapped el reference\n\n\n  trappedEl = el; // update the main landmark reference\n\n  mainEl = document.querySelector('main, [role=\"main\"]'); // we must remove the main landmark to avoid issues on voiceover iOS\n\n  if (mainEl) {\n    mainEl.setAttribute('role', 'presentation');\n  } // cache all ancestors, siblings & siblings of ancestors for trappedEl\n\n\n  var ancestors = util.getAncestors(trappedEl);\n  var siblings = util.getSiblings(trappedEl);\n  var siblingsOfAncestors = util.getSiblingsOfAncestors(trappedEl); // if using hidden property, filter out SVG elements as they do not support this property\n\n  if (options.useHiddenProperty === true) {\n    siblings = siblings.filter(filterSvg);\n    siblingsOfAncestors = siblingsOfAncestors.filter(filterSvg);\n  } // prepare elements\n\n\n  dirtyObjects = [showElementPrep(trappedEl, options.useHiddenProperty)].concat(ancestors.map(function (item) {\n    return showElementPrep(item, options.useHiddenProperty);\n  })).concat(siblings.map(function (item) {\n    return hideElementPrep(item, options.useHiddenProperty);\n  })).concat(siblingsOfAncestors.map(function (item) {\n    return hideElementPrep(item, options.useHiddenProperty);\n  })); // update DOM\n\n  dirtyObjects.forEach(function (item) {\n    return dirtyElement(item);\n  }); // let observers know the screenreader is now trapped\n\n  trappedEl.dispatchEvent(new CustomEvent('screenreaderTrap', {\n    bubbles: true\n  }));\n}\n\nmodule.exports = {\n  trap: trap,\n  untrap: untrap\n};\n","\nvar NativeCustomEvent = global.CustomEvent;\n\nfunction useNative () {\n  try {\n    var p = new NativeCustomEvent('cat', { detail: { foo: 'bar' } });\n    return  'cat' === p.type && 'bar' === p.detail.foo;\n  } catch (e) {\n  }\n  return false;\n}\n\n/**\n * Cross-browser `CustomEvent` constructor.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent.CustomEvent\n *\n * @public\n */\n\nmodule.exports = useNative() ? NativeCustomEvent :\n\n// IE >= 9\n'undefined' !== typeof document && 'function' === typeof document.createEvent ? function CustomEvent (type, params) {\n  var e = document.createEvent('CustomEvent');\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, void 0);\n  }\n  return e;\n} :\n\n// IE <= 8\nfunction CustomEvent (type, params) {\n  var e = document.createEventObject();\n  e.type = type;\n  if (params) {\n    e.bubbles = Boolean(params.bubbles);\n    e.cancelable = Boolean(params.cancelable);\n    e.detail = params.detail;\n  } else {\n    e.bubbles = false;\n    e.cancelable = false;\n    e.detail = void 0;\n  }\n  return e;\n}\n","'use strict'; // filter function for ancestor elements\n\nvar filterAncestor = function filterAncestor(item) {\n  return item.nodeType === 1 && item.tagName.toLowerCase() !== 'body' && item.tagName.toLowerCase() !== 'html';\n}; // filter function for sibling elements\n\n\nvar filterSibling = function filterSibling(item) {\n  return item.nodeType === 1 && item.tagName.toLowerCase() !== 'script';\n}; // reducer to flatten arrays\n\n\nvar flattenArrays = function flattenArrays(a, b) {\n  return a.concat(b);\n}; // recursive function to get previous sibling nodes of given element\n\n\nfunction getPreviousSiblings(el) {\n  var siblings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var previousSibling = el.previousSibling;\n\n  if (!previousSibling) {\n    return siblings;\n  }\n\n  siblings.push(previousSibling);\n  return getPreviousSiblings(previousSibling, siblings);\n} // recursive function to get next sibling nodes of given element\n\n\nfunction getNextSiblings(el) {\n  var siblings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var nextSibling = el.nextSibling;\n\n  if (!nextSibling) {\n    return siblings;\n  }\n\n  siblings.push(nextSibling);\n  return getNextSiblings(nextSibling, siblings);\n} // returns all sibling element nodes of given element\n\n\nfunction getSiblings(el) {\n  var allSiblings = getPreviousSiblings(el).concat(getNextSiblings(el));\n  return allSiblings.filter(filterSibling);\n} // recursive function to get all ancestor nodes of given element\n\n\nfunction getAllAncestors(el) {\n  var ancestors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var nextAncestor = el.parentNode;\n\n  if (!nextAncestor) {\n    return ancestors;\n  }\n\n  ancestors.push(nextAncestor);\n  return getAllAncestors(nextAncestor, ancestors);\n} // get ancestor nodes of given element\n\n\nfunction getAncestors(el) {\n  return getAllAncestors(el).filter(filterAncestor);\n} // get siblings of ancestors (i.e. aunts and uncles) of given el\n\n\nfunction getSiblingsOfAncestors(el) {\n  return getAncestors(el).map(function (item) {\n    return getSiblings(item);\n  }).reduce(flattenArrays, []);\n}\n\nmodule.exports = {\n  getSiblings: getSiblings,\n  getAncestors: getAncestors,\n  getSiblingsOfAncestors: getSiblingsOfAncestors\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","\"use strict\";\n\n// NodeList.forEach polyfill for IE\nrequire('nodelist-foreach-polyfill');\n\nvar screenreaderTrap = require('../../packages/makeup-screenreader-trap');\n\ndocument.querySelectorAll('.trap').forEach(function (item) {\n  item.addEventListener('click', function () {\n    if (this.getAttribute('aria-pressed') === 'true') {\n      screenreaderTrap.untrap(this);\n    } else {\n      screenreaderTrap.trap(this, {\n        useHiddenProperty: false\n      });\n    }\n  });\n  item.addEventListener('screenreaderTrap', function (e) {\n    console.log(this, e);\n    this.innerText = 'Untrap';\n    this.setAttribute('aria-pressed', 'true');\n  });\n  item.addEventListener('screenreaderUntrap', function (e) {\n    console.log(this, e);\n    this.innerText = 'Trap';\n    this.setAttribute('aria-pressed', 'false');\n  });\n});\ndocument.addEventListener('screenreaderTrap', function (e) {\n  console.log(this, e);\n});\ndocument.addEventListener('screenreaderUntrap', function (e) {\n  console.log(this, e);\n});"],"sourceRoot":""}